---
import DefaultDealerProfileImage from "@components/icons/DefaultDealerProfileImage.astro";
import DefaultUserProfileImage from "@components/icons/DefaultUserProfileImage.astro";
import { getProfileImageUrl } from "@lib/services/imagekit";

export const partial = true;
const { id, isDealer } = Astro.locals.user;
const searchParamId = Astro.url.searchParams.get("id");
const imageUrl = id && (await getProfileImageUrl(searchParamId || id));
const DefaultImage = isDealer ? DefaultDealerProfileImage : DefaultUserProfileImage;
---

{imageUrl ? <img src={imageUrl} alt="Profile image" /> : <DefaultImage />}
