---
import { t } from "@lib/i18n";
import FlagDE from "@components/icons/FlagDE.astro";
import FlagUK from "@components/icons/FlagUK.astro";
import type { User } from "@lib/models/user";

interface Props {
	user: User;
}

const { user } = Astro.props;
---

<div
	class="absolute right-2 top-10 z-50 select-none rounded-md border-2 border-[#232b2e] bg-dark md:hidden"
	x-transition.duration.300ms
	x-show="showMenu"
	@click.outside="showMenu = false">
	<div class="flex flex-col gap-5 p-6 sm:px-3">
		{user.isAuthenticated && user.isDealer && <div>DealerMenu</div>}
		{user.isAuthenticated && !user.isDealer && <div>UserMenu</div>}
		{!user.isAuthenticated && <div>LogOutMenu</div>}
		<!-- if user.IsAuthenticated {
                                                                  if user.IsDealer {
                                                                    @DealerMenu(lang)
                                                                  } else {
                                                                    @UserMenu(lang)
                                                                  }
                                                                } else {
                                                                  @menuEntry(t("login", lang), "/login", icon.Login())
                                                                  @menuEntry(t("signup", lang), "/signup", icon.Registration())
                                                                } -->
		<div class="flex gap-4">
			{t("language", user.language)}:
			<div class="flex gap-2">
				<a class="link w-10" href="/language-set/de">
					<FlagDE />
				</a>
				<a class="link w-10" href="/language-set/en">
					<FlagUK />
				</a>
			</div>
		</div>

		<!--<button onclick="LocationService.toggleLocationServiceSimulation();">-->
		<!--  Toggle Walk Simulator-->
		<!--</button>-->
		<div class="flex gap-8 text-xs justify-around pt-8">
			<a href="/imprint">{t("imprint", user.language)}</a>
			<a href="/terms">{t("terms", user.language)}</a>
			<a href="/privacy">{t("privacy", user.language)}</a>
		</div>
	</div>
</div>
