---
import FilterIcon from "@components/icons/FilterIcon.astro";
import LocationIcon from "@components/icons/LocationIcon.astro";
import { t } from "@lib/services/i18n";

const { username, userId, lang } = Astro.props;
---

<div class="flex h-52 justify-between">
	<div class="flex w-full justify-between">
		<div class="m-4 flex flex-col gap-4">
			<div class="flex gap-2 fill-current text-xs text-[#69828c]">
				<div id="deals-count-badge"></div>
				<div hx-get="/favorite-dealers-count-badge" hx-trigger="load" hx-target="this"></div>
				<div
					hx-get="/favorite-deals-count-badge"
					hx-trigger="load, updateFavDealsCountBadge from:body"
					hx-target="this">
				</div>
			</div>
			<div class="text-2xl">{username}</div>
			<div class="flex flex-col gap-2 text-sm">
				<div class="font-extrabold">{t("your_location", lang)}</div>
				<div class="flex gap-2 items-end">
					<LocationIcon class="h-6" />
					<div class="flex flex-col text-xs">
						<div id="street">"Suche aktuelle Position ..."</div>
						<div id="city"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="flex flex-col gap-8">
			<div class="avatar z-40 cursor-pointer -mt-6 mr-16">
				<div class="h-24 w-24 rounded-full bg-base-100 ring-2 ring-[#556368]">
					<div
						hx-get={"/profile-image/" + userId}
						hx-target="this"
						hx-trigger="load once"
						hx-swap="outerHTML">
					</div>
				</div>
			</div>
			<button
				class="btn-primary btn-circle flex w-20 justify-start rounded-r-none rounded-l-full self-end px-1"
				hx-get="/ui/map/filter-modal?redirect-after-save=/user"
				hx-target="#modal">
				<FilterIcon class="w-auto h-12 border border-white rounded-full p-1" />
			</button>
		</div>
	</div>
</div>
